<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>2018-12-26::ANAの機内WiFiポータルを覗き見る | tesshy::tesshy</title>
<link href="../../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&amp;display=swap" rel="stylesheet">
<link href="../../../assets/css/custom.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="ja" href="../../../rss.xml">
<link rel="canonical" href="https://www.tesshy.com/posts/diary/2018-12-26/">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><script defer async="" src="//www.instagram.com/embed.js" id="instagram-embed-script"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6MV2BD0PZ3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6MV2BD0PZ3');
</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2607876792762904" crossorigin="anonymous"></script><meta name="author" content="Tetsushi Watanabe">
<link rel="prev" href="../../campingcar/2018-07-30/" title="キャンピングカー制作日誌::2018-07-30" type="text/html">
<link rel="next" href="../Lollipop_SSL/" title="ロリポップの独自SSLを外部ネームサーバーで使用する方法" type="text/html">
<meta property="og:site_name" content="tesshy::tesshy">
<meta property="og:title" content="2018-12-26::ANAの機内WiFiポータルを覗き見る">
<meta property="og:url" content="https://www.tesshy.com/posts/diary/2018-12-26/">
<meta property="og:description" content='ちょっと仕事で札幌に行く用事。ANA 機内WiFiなるものが気になったので使ってたのだが、ポータルサイトの通信が異常に多いことに気が付いてDev Consoleで見てみたら、何やら楽しそうなJSONがやりとりされてたのでGETしてみた。
curl "http://services.inflightpanasonic.aero/inflight/services/flightdata/v1/flig'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-12-26T17:40:43+09:00">
<meta property="article:tag" content="diary">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@tesshy">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">本文を読み飛ばす</a>
    <div id="container">
            <header id="header"><h1 id="brand"><a href="../../../" title="tesshy::tesshy" rel="home">

        <span id="blog-title">tesshy::tesshy</span>
    </a></h1>

        
            <nav id="menu"><ul>
<li><a href="../../../pages/profile">プロフィール</a></li>
                <li><a href="../../../archive.html">記事一覧</a></li>
                <li><a href="../../../categories/">タグ</a></li>
                <li><a href="../../../rss.xml">RSS</a></li>

    
    
    
    </ul></nav></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">2018-12-26::ANAの機内WiFiポータルを覗き見る</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Tetsushi Watanabe
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2018-12-26T17:40:43+09:00" itemprop="datePublished" title="2018-12-26 17:40">2018-12-26 17:40</time></a>
            </p>
                    <p class="sourceline"><a href="index.ipynb" class="sourcelink">ソース</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ちょっと仕事で札幌に行く用事。ANA 機内WiFiなるものが気になったので使ってたのだが、ポータルサイトの通信が異常に多いことに気が付いてDev Consoleで見てみたら、何やら楽しそうなJSONがやりとりされてたのでGETしてみた。</p>
<div class="highlight"><pre><span></span>curl <span class="s2">"http://services.inflightpanasonic.aero/inflight/services/flightdata/v1/flightdata"</span> <span class="p">|</span> jq .
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
<span class="m">100</span>  <span class="m">2151</span>  <span class="m">100</span>  <span class="m">2151</span>    <span class="m">0</span>     <span class="m">0</span>   181k      <span class="m">0</span> --:--:-- --:--:-- --:--:--  190k
</pre></div>
<div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_decompression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_weight_on_wheels"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_all_doors_closed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_x2_pa_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_ground_speed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0433"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_time_to_destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0051"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_wind_speed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-140"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_mach"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0836"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_true_heading"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0191"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_gmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0419"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_outside_air_temp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8050"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_head_wind_speed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-140"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00261218"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_distance_to_destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000287"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_altitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00032001"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_present_position_latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00039352"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_present_position_longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00141077"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_destination_latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00035339"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_destination_longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00139455"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_destination_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RJTT"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_departure_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RJCC"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_flight_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANA62"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_destination_baggage_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HND"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_departure_baggage_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CTS"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_airframe_tail_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JA707A"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_flight_phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_gmt_offset_departure"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00009.00"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_gmt_offset_destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00009.00"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_route_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_time_at_origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1319"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_time_at_destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1319"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_distance_from_origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000196"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_distance_traveled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000196"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_estimated_arrival_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1410"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_time_at_takeoff"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002612180348"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_departure_latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00042463"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_departure_longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00141413"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_pdi_fltdata_departure_iata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_pdi_fltdata_departure_time_scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_pdi_fltdata_arrival_iata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_fltdata_wind_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0268"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_media_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20181201"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"td_id_extv_channel_listing_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1075"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"disclaimer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Attn: Data elements such as temperature, flight latitude, flight longitude, etc. are classified as Product Public under the Panasonic Product Data Classification Framework. Information under this classification does not carry any access, labeling, or transmission restrictions. Deliberate or accidental exposure to these types of data elements, does not lead to any adverse impact to aircraft operations or safety."</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>暇なんでGoogle Mapsで現在位置URL生成するスクリプト書いてみた。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">"http://services.inflightpanasonic.aero/inflight/services/flightdata/v1/flightdata"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"content-type"</span><span class="p">:</span> <span class="s2">"application/json"</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">lat</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">"td_id_fltdata_present_position_latitude"</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span>
<span class="n">lon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">"td_id_fltdata_present_position_longitude"</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"https://maps.google.com/maps?z=10&amp;q=</span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>https://maps.google.com/maps?z=10&amp;q=36.156,140.148
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>うむ、動いた。もう少し時間あれば定期的にGETしてきてピン動かすとかしたかったんだけど、そろそろ降下なのでここまで、ちゃんちゃん。</p>
<p>機内サーバーに地図データ置いてリアルタイムにみられるようにすればいいと思うんだがいかんのかね・・・（飛んでる時に現在地が常に知りたい病）</p>

</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/diary/" rel="tag">diary</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../campingcar/2018-07-30/" rel="prev" title="キャンピングカー制作日誌::2018-07-30">一つ前の記事</a>
            </li>
            <li class="next">
                <a href="../Lollipop_SSL/" rel="next" title="ロリポップの独自SSLを外部ネームサーバーで使用する方法">次の記事</a>
            </li>
        </ul></nav></aside><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script></article></main><footer id="footer"><p>Contents © 2022         <a href="mailto:tesshy@tesshy.com">Tetsushi Watanabe</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
                <script src="../../../assets/js/baguetteBox.min.js"></script><!-- Social buttons --><div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script><!-- End of social buttons --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
